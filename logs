2020-04-25 20:33:39,387 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:33:39,388 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:33:39,388 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:33:39,389 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:33:39,390 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:33:39,391 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:33:39,391 INFO [context/create_or_update]: key James now available in TakeoffContext
2020-04-25 20:33:39,392 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:33:39,397 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-25 20:33:39,397 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-25 20:33:39,397 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-25 20:33:39,397 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:33:39,397 INFO [deploy/main]: ********** RUNNING TASK: configure_eventhub                       **********
2020-04-25 20:33:39,397 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:33:39,400 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-25 20:33:39,400 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-25 20:33:39,400 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-25 20:33:39,401 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:33:39,401 INFO [deploy/main]: ********** RUNNING TASK: create_databricks_secrets_from_vault     **********
2020-04-25 20:33:39,401 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:33:39,404 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-25 20:33:39,404 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-25 20:33:39,404 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-25 20:33:39,404 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:33:39,404 INFO [deploy/main]: ********** RUNNING TASK: deploy_to_databricks                     **********
2020-04-25 20:33:39,404 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:33:39,411 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-25 20:33:39,411 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-25 20:33:39,417 INFO [deploy/main]: Adding plugins from ['/home/julia/simsalabim/takeoff/tests'] and current working directory
2020-04-25 20:33:39,418 INFO [deploy/main]: Running Takeoff with application version: <MagicMock name='get_environment()' id='140379097197152'>
2020-04-25 20:33:39,436 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_custom': <module '_takeoff_custom' from '/home/julia/simsalabim/takeoff/tests/_takeoff_custom/__init__.py'>}
2020-04-25 20:33:39,436 INFO [deploy/find_env_function]: Using plugin 'deploy_env_logic' function
2020-04-25 20:33:39,443 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/deployment.yaml
2020-04-25 20:33:39,444 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yaml
2020-04-25 20:33:39,444 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yml
2020-04-25 20:33:39,586 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-04-25 20:33:39,606 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-04-25 20:33:39,626 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-04-25 20:33:39,646 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-04-25 20:33:39,666 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-04-25 20:33:39,683 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-04-25 20:33:39,698 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/name/myapp:SNAPSHOT -f ./Dockerfile .
2020-04-25 20:33:39,698 INFO [build_docker_image/push_image]: Uploading docker image pony/name/myapp:SNAPSHOT
2020-04-25 20:33:39,699 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:SNAPSHOT -f ./File2 .
2020-04-25 20:33:39,699 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:SNAPSHOT
2020-04-25 20:33:39,715 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/myapp:2.1.0 -f ./Dockerfile .
2020-04-25 20:33:39,715 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:2.1.0
2020-04-25 20:33:39,715 INFO [build_docker_image/tag_image]: Tagging pony/myapp:2.1.0 as pony/myapp:latest
2020-04-25 20:33:39,715 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:latest
2020-04-25 20:33:39,715 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:2.1.0 -f ./File2 .
2020-04-25 20:33:39,715 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:2.1.0
2020-04-25 20:33:39,733 ERROR [step/validate]: not a valid value for dictionary value @ data['task']
2020-04-25 20:33:39,734 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'eventhub_naming': 'eventhub{env}',
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'task': 'createEventHubConsumerGroups'}
2020-04-25 20:33:39,747 WARNING [configure_eventhub/_group_exists]: Consumer group with name group1 in hub some_hub already exists, not creating.
2020-04-25 20:33:39,766 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,766 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-04-25 20:33:39,785 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,802 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,802 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-04-25 20:33:39,802 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-04-25 20:33:39,817 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,817 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity1',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-04-25 20:33:39,832 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,832 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity2',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-04-25 20:33:39,832 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-04-25 20:33:39,849 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,849 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-04-25 20:33:39,851 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-25 20:33:39,852 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-25 20:33:39,853 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-25 20:33:39,871 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,886 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,886 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-04-25 20:33:39,886 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-04-25 20:33:39,886 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-04-25 20:33:39,888 INFO [context/create_or_update]: key ContextKey.EVENTHUB_CONSUMER_GROUP_SECRETS now available in TakeoffContext
2020-04-25 20:33:39,890 INFO [configure_eventhub/_create_consumer_group]: Creating consumer group EventHubConsumerGroup(eventhub=EventHub(resource_group='my-rg', namespace='my-namespace', name='my-entity'), consumer_group='my-group', create_databricks_secret=True)
2020-04-25 20:33:39,890 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-rg, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-25 20:33:39,921 ERROR [step/validate]: not a valid value for dictionary value @ data['application_type']
2020-04-25 20:33:39,922 ERROR [step/validate]: {'application_type': 'invalid',
 'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'kind': 'invalid',
 'task': 'create_application_insights'}
2020-04-25 20:33:39,942 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-04-25 20:33:39,957 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:39,974 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-04-25 20:33:39,989 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:40,249 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: foo
2020-04-25 20:33:40,249 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: bar
2020-04-25 20:33:40,507 INFO [deploy_to_kubernetes/_write_kube_config]: Kubeconfig successfully written
2020-04-25 20:33:40,674 ERROR [step/validate]: length of value must be at least 1 for dictionary value @ data['jobs']
2020-04-25 20:33:40,675 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'jobs': [],
 'task': 'deploy_to_databricks'}
2020-04-25 20:33:40,847 INFO [deploy_to_databricks/deploy_to_databricks]: Removing old job
2020-04-25 20:33:40,847 INFO [deploy_to_databricks/deploy_to_databricks]: Submitting new job with configuration:
2020-04-25 20:33:40,848 INFO [deploy_to_databricks/deploy_to_databricks]: {'libraries': [{'whl': 'dbfs:/mnt/libraries/version/version-bar-py3-none-any.whl'},
               {'jar': 'some.jar'}],
 'name': 'job_with_schedule',
 'new_cluster': {'cluster_log_conf': {'dbfs': {'destination': 'dbfs:/mnt/sdh/logs/job_with_schedule'}},
                 'spark_conf': {'some.setting': 'true',
                                'spark.sql.warehouse.dir': '/some_'},
                 'spark_version': '4.1.x-scala2.11'},
 'spark_python_task': {'parameters': ['--key', 'val', '--key2', 'val2'],
                       'python_file': 'dbfs:/mnt/libraries/version/version-main-bar.py'}}
2020-04-25 20:33:40,859 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-04-25 20:33:40,859 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-04-25 20:33:40,859 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-04-25 20:33:40,859 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-04-25 20:33:40,880 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-04-25 20:33:40,880 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-04-25 20:33:40,881 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-04-25 20:33:40,881 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-04-25 20:33:40,891 INFO [deploy_to_databricks/remove_job]: Could not find jobs in list of [JobConfig(name='job1', job_id='id1'), JobConfig(name='job2', job_id='id2')]
2020-04-25 20:33:40,901 INFO [deploy_to_databricks/_kill_it_with_fire]: Finding runs for job_id my-id
2020-04-25 20:33:40,901 INFO [deploy_to_databricks/_kill_it_with_fire]: Canceling active runs ['run1', 'run2']
2020-04-25 20:33:40,912 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-04-25 20:33:40,921 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-04-25 20:33:40,921 INFO [deploy_to_databricks/_submit_job]: Created run with ID run1
2020-04-25 20:33:41,013 INFO [publish_artifact/publish_to_pypi]: Not on a release tag, not publishing artifact on PyPi.
2020-04-25 20:33:41,021 INFO [publish_artifact/_upload_file_to_azure_storage_account]: uploading artifact from
             | from $Dave
             | to $Mustaine
             | in container mylittlepony
2020-04-25 20:33:41,042 ERROR [step/validate]: Cannot publish wheels to Ivy
2020-04-25 20:33:41,043 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'python',
 'target': ['ivy'],
 'task': 'publish_artifact'}
2020-04-25 20:33:41,050 ERROR [step/validate]: value is not allowed for dictionary value @ data['language']
2020-04-25 20:33:41,051 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'sbt',
 'target': ['pypi'],
 'task': 'publish_artifact'}
2020-04-25 20:33:41,069 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:41,090 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:33:41,111 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:41,133 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:33:41,154 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:41,175 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:33:41,196 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:41,217 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:33:41,238 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:41,255 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:33:41,272 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:33:41,288 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:33:41,311 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:53,643 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:34:53,644 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:34:53,644 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:34:53,645 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:34:53,646 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:34:53,647 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:34:53,647 INFO [context/create_or_update]: key James now available in TakeoffContext
2020-04-25 20:34:53,648 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-25 20:34:53,653 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-25 20:34:53,653 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-25 20:34:53,653 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-25 20:34:53,653 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:34:53,653 INFO [deploy/main]: ********** RUNNING TASK: configure_eventhub                       **********
2020-04-25 20:34:53,653 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:34:53,656 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-25 20:34:53,656 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-25 20:34:53,657 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-25 20:34:53,657 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:34:53,657 INFO [deploy/main]: ********** RUNNING TASK: create_databricks_secrets_from_vault     **********
2020-04-25 20:34:53,657 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:34:53,660 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-25 20:34:53,660 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-25 20:34:53,660 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-25 20:34:53,660 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:34:53,660 INFO [deploy/main]: ********** RUNNING TASK: deploy_to_databricks                     **********
2020-04-25 20:34:53,660 INFO [deploy/main]: ****************************************************************************
2020-04-25 20:34:53,667 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-25 20:34:53,667 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-25 20:34:53,674 INFO [deploy/main]: Adding plugins from ['/home/julia/simsalabim/takeoff/tests'] and current working directory
2020-04-25 20:34:53,674 INFO [deploy/main]: Running Takeoff with application version: <MagicMock name='get_environment()' id='140044230788000'>
2020-04-25 20:34:53,692 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_custom': <module '_takeoff_custom' from '/home/julia/simsalabim/takeoff/tests/_takeoff_custom/__init__.py'>}
2020-04-25 20:34:53,692 INFO [deploy/find_env_function]: Using plugin 'deploy_env_logic' function
2020-04-25 20:34:53,699 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/deployment.yaml
2020-04-25 20:34:53,700 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yaml
2020-04-25 20:34:53,700 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yml
2020-04-25 20:34:53,820 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-04-25 20:34:53,836 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-04-25 20:34:53,852 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-04-25 20:34:53,868 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-04-25 20:34:53,884 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-04-25 20:34:53,900 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-04-25 20:34:53,917 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/name/myapp:SNAPSHOT -f ./Dockerfile .
2020-04-25 20:34:53,917 INFO [build_docker_image/push_image]: Uploading docker image pony/name/myapp:SNAPSHOT
2020-04-25 20:34:53,917 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:SNAPSHOT -f ./File2 .
2020-04-25 20:34:53,917 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:SNAPSHOT
2020-04-25 20:34:53,933 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/myapp:2.1.0 -f ./Dockerfile .
2020-04-25 20:34:53,933 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:2.1.0
2020-04-25 20:34:53,934 INFO [build_docker_image/tag_image]: Tagging pony/myapp:2.1.0 as pony/myapp:latest
2020-04-25 20:34:53,934 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:latest
2020-04-25 20:34:53,934 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:2.1.0 -f ./File2 .
2020-04-25 20:34:53,934 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:2.1.0
2020-04-25 20:34:53,951 ERROR [step/validate]: not a valid value for dictionary value @ data['task']
2020-04-25 20:34:53,952 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'eventhub_naming': 'eventhub{env}',
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'task': 'createEventHubConsumerGroups'}
2020-04-25 20:34:53,966 WARNING [configure_eventhub/_group_exists]: Consumer group with name group1 in hub some_hub already exists, not creating.
2020-04-25 20:34:53,985 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:53,985 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-04-25 20:34:54,003 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,018 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,019 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-04-25 20:34:54,019 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-04-25 20:34:54,033 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,034 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity1',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-04-25 20:34:54,048 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,049 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity2',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-04-25 20:34:54,049 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-04-25 20:34:54,066 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,066 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-04-25 20:34:54,068 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-25 20:34:54,069 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-25 20:34:54,071 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-25 20:34:54,088 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,104 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,104 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-04-25 20:34:54,104 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-04-25 20:34:54,104 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-04-25 20:34:54,106 INFO [context/create_or_update]: key ContextKey.EVENTHUB_CONSUMER_GROUP_SECRETS now available in TakeoffContext
2020-04-25 20:34:54,108 INFO [configure_eventhub/_create_consumer_group]: Creating consumer group EventHubConsumerGroup(eventhub=EventHub(resource_group='my-rg', namespace='my-namespace', name='my-entity'), consumer_group='my-group', create_databricks_secret=True)
2020-04-25 20:34:54,108 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-rg, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-25 20:34:54,139 ERROR [step/validate]: not a valid value for dictionary value @ data['application_type']
2020-04-25 20:34:54,140 ERROR [step/validate]: {'application_type': 'invalid',
 'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'kind': 'invalid',
 'task': 'create_application_insights'}
2020-04-25 20:34:54,160 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-04-25 20:34:54,176 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,193 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-04-25 20:34:54,208 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:54,468 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: foo
2020-04-25 20:34:54,468 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: bar
2020-04-25 20:34:54,716 INFO [deploy_to_kubernetes/_write_kube_config]: Kubeconfig successfully written
2020-04-25 20:34:54,881 ERROR [step/validate]: length of value must be at least 1 for dictionary value @ data['jobs']
2020-04-25 20:34:54,882 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'jobs': [],
 'task': 'deploy_to_databricks'}
2020-04-25 20:34:55,057 INFO [deploy_to_databricks/deploy_to_databricks]: Removing old job
2020-04-25 20:34:55,058 INFO [deploy_to_databricks/deploy_to_databricks]: Submitting new job with configuration:
2020-04-25 20:34:55,058 INFO [deploy_to_databricks/deploy_to_databricks]: {'libraries': [{'whl': 'dbfs:/mnt/libraries/version/version-bar-py3-none-any.whl'},
               {'jar': 'some.jar'}],
 'name': 'job_with_schedule',
 'new_cluster': {'cluster_log_conf': {'dbfs': {'destination': 'dbfs:/mnt/sdh/logs/job_with_schedule'}},
                 'spark_conf': {'some.setting': 'true',
                                'spark.sql.warehouse.dir': '/some_'},
                 'spark_version': '4.1.x-scala2.11'},
 'spark_python_task': {'parameters': ['--key', 'val', '--key2', 'val2'],
                       'python_file': 'dbfs:/mnt/libraries/version/version-main-bar.py'}}
2020-04-25 20:34:55,070 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-04-25 20:34:55,070 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-04-25 20:34:55,070 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-04-25 20:34:55,070 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-04-25 20:34:55,092 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-04-25 20:34:55,092 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-04-25 20:34:55,092 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-04-25 20:34:55,092 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-04-25 20:34:55,102 INFO [deploy_to_databricks/remove_job]: Could not find jobs in list of [JobConfig(name='job1', job_id='id1'), JobConfig(name='job2', job_id='id2')]
2020-04-25 20:34:55,112 INFO [deploy_to_databricks/_kill_it_with_fire]: Finding runs for job_id my-id
2020-04-25 20:34:55,112 INFO [deploy_to_databricks/_kill_it_with_fire]: Canceling active runs ['run1', 'run2']
2020-04-25 20:34:55,123 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-04-25 20:34:55,132 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-04-25 20:34:55,132 INFO [deploy_to_databricks/_submit_job]: Created run with ID run1
2020-04-25 20:34:55,216 INFO [publish_artifact/publish_to_pypi]: Not on a release tag, not publishing artifact on PyPi.
2020-04-25 20:34:55,224 INFO [publish_artifact/_upload_file_to_azure_storage_account]: uploading artifact from
             | from $Dave
             | to $Mustaine
             | in container mylittlepony
2020-04-25 20:34:55,239 ERROR [step/validate]: Cannot publish wheels to Ivy
2020-04-25 20:34:55,240 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'python',
 'target': ['ivy'],
 'task': 'publish_artifact'}
2020-04-25 20:34:55,246 ERROR [step/validate]: value is not allowed for dictionary value @ data['language']
2020-04-25 20:34:55,247 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'sbt',
 'target': ['pypi'],
 'task': 'publish_artifact'}
2020-04-25 20:34:55,264 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:55,281 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:34:55,297 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:55,314 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:34:55,330 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:55,347 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:34:55,364 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:55,380 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:34:55,397 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:55,414 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:34:55,431 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-25 20:34:55,448 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-25 20:34:55,471 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,366 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-26 20:53:20,368 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-26 20:53:20,368 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-26 20:53:20,369 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-26 20:53:20,370 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-26 20:53:20,371 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-26 20:53:20,371 INFO [context/create_or_update]: key James now available in TakeoffContext
2020-04-26 20:53:20,372 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-04-26 20:53:20,376 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-26 20:53:20,376 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-26 20:53:20,376 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-26 20:53:20,376 INFO [deploy/main]: ****************************************************************************
2020-04-26 20:53:20,376 INFO [deploy/main]: ********** RUNNING TASK: configure_eventhub                       **********
2020-04-26 20:53:20,377 INFO [deploy/main]: ****************************************************************************
2020-04-26 20:53:20,380 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-26 20:53:20,380 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-26 20:53:20,380 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-26 20:53:20,380 INFO [deploy/main]: ****************************************************************************
2020-04-26 20:53:20,380 INFO [deploy/main]: ********** RUNNING TASK: create_databricks_secrets_from_vault     **********
2020-04-26 20:53:20,380 INFO [deploy/main]: ****************************************************************************
2020-04-26 20:53:20,384 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-26 20:53:20,384 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-26 20:53:20,384 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-04-26 20:53:20,384 INFO [deploy/main]: ****************************************************************************
2020-04-26 20:53:20,384 INFO [deploy/main]: ********** RUNNING TASK: deploy_to_databricks                     **********
2020-04-26 20:53:20,384 INFO [deploy/main]: ****************************************************************************
2020-04-26 20:53:20,392 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-04-26 20:53:20,392 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-04-26 20:53:20,398 INFO [deploy/main]: Adding plugins from ['/home/julia/simsalabim/takeoff/tests'] and current working directory
2020-04-26 20:53:20,399 INFO [deploy/main]: Running Takeoff with application version: <MagicMock name='get_environment()' id='140231483655360'>
2020-04-26 20:53:20,418 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_custom': <module '_takeoff_custom' from '/home/julia/simsalabim/takeoff/tests/_takeoff_custom/__init__.py'>}
2020-04-26 20:53:20,418 INFO [deploy/find_env_function]: Using plugin 'deploy_env_logic' function
2020-04-26 20:53:20,425 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/deployment.yaml
2020-04-26 20:53:20,426 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yaml
2020-04-26 20:53:20,426 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yml
2020-04-26 20:53:20,546 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-04-26 20:53:20,562 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-04-26 20:53:20,579 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-04-26 20:53:20,595 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-04-26 20:53:20,611 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-04-26 20:53:20,627 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-04-26 20:53:20,643 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/name/myapp:SNAPSHOT -f ./Dockerfile .
2020-04-26 20:53:20,643 INFO [build_docker_image/push_image]: Uploading docker image pony/name/myapp:SNAPSHOT
2020-04-26 20:53:20,643 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:SNAPSHOT -f ./File2 .
2020-04-26 20:53:20,643 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:SNAPSHOT
2020-04-26 20:53:20,659 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/myapp:2.1.0 -f ./Dockerfile .
2020-04-26 20:53:20,659 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:2.1.0
2020-04-26 20:53:20,659 INFO [build_docker_image/tag_image]: Tagging pony/myapp:2.1.0 as pony/myapp:latest
2020-04-26 20:53:20,659 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:latest
2020-04-26 20:53:20,660 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:2.1.0 -f ./File2 .
2020-04-26 20:53:20,660 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:2.1.0
2020-04-26 20:53:20,677 ERROR [step/validate]: not a valid value for dictionary value @ data['task']
2020-04-26 20:53:20,678 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'eventhub_naming': 'eventhub{env}',
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'task': 'createEventHubConsumerGroups'}
2020-04-26 20:53:20,692 WARNING [configure_eventhub/_group_exists]: Consumer group with name group1 in hub some_hub already exists, not creating.
2020-04-26 20:53:20,712 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,712 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-04-26 20:53:20,730 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,745 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,745 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-04-26 20:53:20,745 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-04-26 20:53:20,760 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,761 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity1',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-04-26 20:53:20,775 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,776 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity2',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-04-26 20:53:20,776 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-04-26 20:53:20,794 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,794 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-04-26 20:53:20,796 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-26 20:53:20,798 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-26 20:53:20,799 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-26 20:53:20,817 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,832 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,833 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-04-26 20:53:20,833 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-04-26 20:53:20,833 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-04-26 20:53:20,835 INFO [context/create_or_update]: key ContextKey.EVENTHUB_CONSUMER_GROUP_SECRETS now available in TakeoffContext
2020-04-26 20:53:20,837 INFO [configure_eventhub/_create_consumer_group]: Creating consumer group EventHubConsumerGroup(eventhub=EventHub(resource_group='my-rg', namespace='my-namespace', name='my-entity'), consumer_group='my-group', create_databricks_secret=True)
2020-04-26 20:53:20,837 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-rg, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-04-26 20:53:20,870 ERROR [step/validate]: not a valid value for dictionary value @ data['application_type']
2020-04-26 20:53:20,871 ERROR [step/validate]: {'application_type': 'invalid',
 'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'kind': 'invalid',
 'task': 'create_application_insights'}
2020-04-26 20:53:20,891 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-04-26 20:53:20,907 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:20,925 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-04-26 20:53:20,940 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:21,196 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: foo
2020-04-26 20:53:21,196 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: bar
2020-04-26 20:53:21,452 INFO [deploy_to_kubernetes/_write_kube_config]: Kubeconfig successfully written
2020-04-26 20:53:21,617 ERROR [step/validate]: length of value must be at least 1 for dictionary value @ data['jobs']
2020-04-26 20:53:21,619 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'jobs': [],
 'task': 'deploy_to_databricks'}
2020-04-26 20:53:21,791 INFO [deploy_to_databricks/deploy_to_databricks]: Removing old job
2020-04-26 20:53:21,792 INFO [deploy_to_databricks/deploy_to_databricks]: Submitting new job with configuration:
2020-04-26 20:53:21,792 INFO [deploy_to_databricks/deploy_to_databricks]: {'libraries': [{'whl': 'dbfs:/mnt/libraries/version/version-bar-py3-none-any.whl'},
               {'jar': 'some.jar'}],
 'name': 'job_with_schedule',
 'new_cluster': {'cluster_log_conf': {'dbfs': {'destination': 'dbfs:/mnt/sdh/logs/job_with_schedule'}},
                 'spark_conf': {'some.setting': 'true',
                                'spark.sql.warehouse.dir': '/some_'},
                 'spark_version': '4.1.x-scala2.11'},
 'spark_python_task': {'parameters': ['--key', 'val', '--key2', 'val2'],
                       'python_file': 'dbfs:/mnt/libraries/version/version-main-bar.py'}}
2020-04-26 20:53:21,803 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-04-26 20:53:21,804 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-04-26 20:53:21,804 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-04-26 20:53:21,804 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-04-26 20:53:21,826 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-04-26 20:53:21,826 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-04-26 20:53:21,826 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-04-26 20:53:21,826 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-04-26 20:53:21,837 INFO [deploy_to_databricks/remove_job]: Could not find jobs in list of [JobConfig(name='job1', job_id='id1'), JobConfig(name='job2', job_id='id2')]
2020-04-26 20:53:21,847 INFO [deploy_to_databricks/_kill_it_with_fire]: Finding runs for job_id my-id
2020-04-26 20:53:21,847 INFO [deploy_to_databricks/_kill_it_with_fire]: Canceling active runs ['run1', 'run2']
2020-04-26 20:53:21,858 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-04-26 20:53:21,869 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-04-26 20:53:21,869 INFO [deploy_to_databricks/_submit_job]: Created run with ID run1
2020-04-26 20:53:21,956 INFO [publish_artifact/publish_to_pypi]: Not on a release tag, not publishing artifact on PyPi.
2020-04-26 20:53:21,965 INFO [publish_artifact/_upload_file_to_azure_storage_account]: uploading artifact from
             | from $Dave
             | to $Mustaine
             | in container mylittlepony
2020-04-26 20:53:21,981 ERROR [step/validate]: Cannot publish wheels to Ivy
2020-04-26 20:53:21,982 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'python',
 'target': ['ivy'],
 'task': 'publish_artifact'}
2020-04-26 20:53:21,989 ERROR [step/validate]: value is not allowed for dictionary value @ data['language']
2020-04-26 20:53:21,990 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'sbt',
 'target': ['pypi'],
 'task': 'publish_artifact'}
2020-04-26 20:53:22,007 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:22,025 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-26 20:53:22,042 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:22,059 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-26 20:53:22,075 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:22,092 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-26 20:53:22,109 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:22,126 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-26 20:53:22,142 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:22,159 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-26 20:53:22,176 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-04-26 20:53:22,193 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-04-26 20:53:22,216 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,177 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 19:56:26,179 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 19:56:26,179 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 19:56:26,181 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 19:56:26,184 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 19:56:26,186 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 19:56:26,186 INFO [context/create_or_update]: key James now available in TakeoffContext
2020-05-22 19:56:26,188 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 19:56:26,195 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-22 19:56:26,196 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-22 19:56:26,196 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-22 19:56:26,196 INFO [deploy/main]: ****************************************************************************
2020-05-22 19:56:26,196 INFO [deploy/main]: ********** RUNNING TASK: configure_eventhub                       **********
2020-05-22 19:56:26,196 INFO [deploy/main]: ****************************************************************************
2020-05-22 19:56:26,200 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-22 19:56:26,200 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-22 19:56:26,200 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-22 19:56:26,200 INFO [deploy/main]: ****************************************************************************
2020-05-22 19:56:26,200 INFO [deploy/main]: ********** RUNNING TASK: create_databricks_secrets_from_vault     **********
2020-05-22 19:56:26,200 INFO [deploy/main]: ****************************************************************************
2020-05-22 19:56:26,203 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-22 19:56:26,204 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-22 19:56:26,204 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-22 19:56:26,204 INFO [deploy/main]: ****************************************************************************
2020-05-22 19:56:26,204 INFO [deploy/main]: ********** RUNNING TASK: deploy_to_databricks                     **********
2020-05-22 19:56:26,204 INFO [deploy/main]: ****************************************************************************
2020-05-22 19:56:26,212 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-22 19:56:26,212 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-22 19:56:26,219 INFO [deploy/main]: Adding plugins from ['/home/julia/simsalabim/takeoff/tests'] and current working directory
2020-05-22 19:56:26,220 INFO [deploy/main]: Running Takeoff with application version: <MagicMock name='get_environment()' id='140159706350784'>
2020-05-22 19:56:26,239 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_custom': <module '_takeoff_custom' from '/home/julia/simsalabim/takeoff/tests/_takeoff_custom/__init__.py'>}
2020-05-22 19:56:26,239 INFO [deploy/find_env_function]: Using plugin 'deploy_env_logic' function
2020-05-22 19:56:26,246 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/deployment.yaml
2020-05-22 19:56:26,247 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yaml
2020-05-22 19:56:26,248 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yml
2020-05-22 19:56:26,375 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-05-22 19:56:26,391 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-05-22 19:56:26,407 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-05-22 19:56:26,424 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-05-22 19:56:26,441 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-05-22 19:56:26,458 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-05-22 19:56:26,474 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/name/myapp:SNAPSHOT -f ./Dockerfile .
2020-05-22 19:56:26,474 INFO [build_docker_image/push_image]: Uploading docker image pony/name/myapp:SNAPSHOT
2020-05-22 19:56:26,474 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:SNAPSHOT -f ./File2 .
2020-05-22 19:56:26,474 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:SNAPSHOT
2020-05-22 19:56:26,492 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/myapp:2.1.0 -f ./Dockerfile .
2020-05-22 19:56:26,492 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:2.1.0
2020-05-22 19:56:26,492 INFO [build_docker_image/tag_image]: Tagging pony/myapp:2.1.0 as pony/myapp:latest
2020-05-22 19:56:26,492 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:latest
2020-05-22 19:56:26,492 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:2.1.0 -f ./File2 .
2020-05-22 19:56:26,492 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:2.1.0
2020-05-22 19:56:26,510 ERROR [step/validate]: not a valid value for dictionary value @ data['task']
2020-05-22 19:56:26,511 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'eventhub_naming': 'eventhub{env}',
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'task': 'createEventHubConsumerGroups'}
2020-05-22 19:56:26,526 WARNING [configure_eventhub/_group_exists]: Consumer group with name group1 in hub some_hub already exists, not creating.
2020-05-22 19:56:26,545 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,545 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-05-22 19:56:26,564 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,579 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,579 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-05-22 19:56:26,579 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-05-22 19:56:26,594 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,594 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity1',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-05-22 19:56:26,609 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,610 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity2',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-05-22 19:56:26,610 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-05-22 19:56:26,640 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,640 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-05-22 19:56:26,643 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-22 19:56:26,645 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-22 19:56:26,647 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-22 19:56:26,674 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,690 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,690 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-05-22 19:56:26,691 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-05-22 19:56:26,691 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-05-22 19:56:26,693 INFO [context/create_or_update]: key ContextKey.EVENTHUB_CONSUMER_GROUP_SECRETS now available in TakeoffContext
2020-05-22 19:56:26,695 INFO [configure_eventhub/_create_consumer_group]: Creating consumer group EventHubConsumerGroup(eventhub=EventHub(resource_group='my-rg', namespace='my-namespace', name='my-entity'), consumer_group='my-group', create_databricks_secret=True)
2020-05-22 19:56:26,695 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-rg, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-22 19:56:26,729 ERROR [step/validate]: not a valid value for dictionary value @ data['application_type']
2020-05-22 19:56:26,730 ERROR [step/validate]: {'application_type': 'invalid',
 'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'kind': 'invalid',
 'task': 'create_application_insights'}
2020-05-22 19:56:26,754 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-05-22 19:56:26,769 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:26,787 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-05-22 19:56:26,803 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:27,064 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: foo
2020-05-22 19:56:27,064 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: bar
2020-05-22 19:56:27,332 INFO [deploy_to_kubernetes/_write_kube_config]: Kubeconfig successfully written
2020-05-22 19:56:27,546 ERROR [step/validate]: length of value must be at least 1 for dictionary value @ data['jobs']
2020-05-22 19:56:27,548 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'jobs': [],
 'task': 'deploy_to_databricks'}
2020-05-22 19:56:27,747 INFO [deploy_to_databricks/deploy_to_databricks]: Removing old job
2020-05-22 19:56:27,748 INFO [deploy_to_databricks/deploy_to_databricks]: Submitting new job with configuration:
2020-05-22 19:56:27,748 INFO [deploy_to_databricks/deploy_to_databricks]: {'libraries': [{'whl': 'dbfs:/mnt/libraries/version/version-bar-py3-none-any.whl'},
               {'jar': 'some.jar'}],
 'name': 'job_with_schedule',
 'new_cluster': {'cluster_log_conf': {'dbfs': {'destination': 'dbfs:/mnt/sdh/logs/job_with_schedule'}},
                 'spark_conf': {'some.setting': 'true',
                                'spark.sql.warehouse.dir': '/some_'},
                 'spark_version': '4.1.x-scala2.11'},
 'spark_python_task': {'parameters': ['--key', 'val', '--key2', 'val2'],
                       'python_file': 'dbfs:/mnt/libraries/version/version-main-bar.py'}}
2020-05-22 19:56:27,759 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-05-22 19:56:27,759 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-05-22 19:56:27,759 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-05-22 19:56:27,759 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-05-22 19:56:27,782 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-05-22 19:56:27,782 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-05-22 19:56:27,782 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-05-22 19:56:27,782 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-05-22 19:56:27,793 INFO [deploy_to_databricks/remove_job]: Could not find jobs in list of [JobConfig(name='job1', job_id='id1'), JobConfig(name='job2', job_id='id2')]
2020-05-22 19:56:27,803 INFO [deploy_to_databricks/_kill_it_with_fire]: Finding runs for job_id my-id
2020-05-22 19:56:27,804 INFO [deploy_to_databricks/_kill_it_with_fire]: Canceling active runs ['run1', 'run2']
2020-05-22 19:56:27,815 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-05-22 19:56:27,825 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-05-22 19:56:27,825 INFO [deploy_to_databricks/_submit_job]: Created run with ID run1
2020-05-22 19:56:27,915 INFO [publish_artifact/publish_to_pypi]: Not on a release tag, not publishing artifact on PyPi.
2020-05-22 19:56:27,923 INFO [publish_artifact/_upload_file_to_azure_storage_account]: uploading artifact from
             | from $Dave
             | to $Mustaine
             | in container mylittlepony
2020-05-22 19:56:27,940 ERROR [step/validate]: Cannot publish wheels to Ivy
2020-05-22 19:56:27,941 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'python',
 'target': ['ivy'],
 'task': 'publish_artifact'}
2020-05-22 19:56:27,947 ERROR [step/validate]: value is not allowed for dictionary value @ data['language']
2020-05-22 19:56:27,948 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'sbt',
 'target': ['pypi'],
 'task': 'publish_artifact'}
2020-05-22 19:56:27,965 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:27,983 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 19:56:28,000 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:28,017 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 19:56:28,034 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:28,051 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 19:56:28,067 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:28,085 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 19:56:28,103 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:28,122 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 19:56:28,138 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 19:56:28,155 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 19:56:28,178 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,459 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 21:23:19,460 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 21:23:19,460 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 21:23:19,461 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 21:23:19,462 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 21:23:19,463 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 21:23:19,463 INFO [context/create_or_update]: key James now available in TakeoffContext
2020-05-22 21:23:19,464 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-22 21:23:19,468 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-22 21:23:19,469 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-22 21:23:19,469 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-22 21:23:19,469 INFO [deploy/main]: ****************************************************************************
2020-05-22 21:23:19,469 INFO [deploy/main]: ********** RUNNING TASK: configure_eventhub                       **********
2020-05-22 21:23:19,469 INFO [deploy/main]: ****************************************************************************
2020-05-22 21:23:19,472 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-22 21:23:19,472 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-22 21:23:19,473 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-22 21:23:19,473 INFO [deploy/main]: ****************************************************************************
2020-05-22 21:23:19,473 INFO [deploy/main]: ********** RUNNING TASK: create_databricks_secrets_from_vault     **********
2020-05-22 21:23:19,473 INFO [deploy/main]: ****************************************************************************
2020-05-22 21:23:19,476 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-22 21:23:19,476 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-22 21:23:19,476 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-22 21:23:19,476 INFO [deploy/main]: ****************************************************************************
2020-05-22 21:23:19,476 INFO [deploy/main]: ********** RUNNING TASK: deploy_to_databricks                     **********
2020-05-22 21:23:19,476 INFO [deploy/main]: ****************************************************************************
2020-05-22 21:23:19,483 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-22 21:23:19,484 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-22 21:23:19,490 INFO [deploy/main]: Adding plugins from ['/home/julia/simsalabim/takeoff/tests'] and current working directory
2020-05-22 21:23:19,491 INFO [deploy/main]: Running Takeoff with application version: <MagicMock name='get_environment()' id='140150824703168'>
2020-05-22 21:23:19,509 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_custom': <module '_takeoff_custom' from '/home/julia/simsalabim/takeoff/tests/_takeoff_custom/__init__.py'>}
2020-05-22 21:23:19,510 INFO [deploy/find_env_function]: Using plugin 'deploy_env_logic' function
2020-05-22 21:23:19,516 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/deployment.yaml
2020-05-22 21:23:19,517 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yaml
2020-05-22 21:23:19,517 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yml
2020-05-22 21:23:19,651 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-05-22 21:23:19,668 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-05-22 21:23:19,685 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-05-22 21:23:19,701 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-05-22 21:23:19,717 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-05-22 21:23:19,734 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-05-22 21:23:19,749 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/name/myapp:SNAPSHOT -f ./Dockerfile .
2020-05-22 21:23:19,750 INFO [build_docker_image/push_image]: Uploading docker image pony/name/myapp:SNAPSHOT
2020-05-22 21:23:19,750 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:SNAPSHOT -f ./File2 .
2020-05-22 21:23:19,750 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:SNAPSHOT
2020-05-22 21:23:19,767 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/myapp:2.1.0 -f ./Dockerfile .
2020-05-22 21:23:19,767 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:2.1.0
2020-05-22 21:23:19,767 INFO [build_docker_image/tag_image]: Tagging pony/myapp:2.1.0 as pony/myapp:latest
2020-05-22 21:23:19,767 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:latest
2020-05-22 21:23:19,767 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:2.1.0 -f ./File2 .
2020-05-22 21:23:19,767 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:2.1.0
2020-05-22 21:23:19,789 ERROR [step/validate]: not a valid value for dictionary value @ data['task']
2020-05-22 21:23:19,791 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'eventhub_naming': 'eventhub{env}',
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'task': 'createEventHubConsumerGroups'}
2020-05-22 21:23:19,809 WARNING [configure_eventhub/_group_exists]: Consumer group with name group1 in hub some_hub already exists, not creating.
2020-05-22 21:23:19,834 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,834 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-05-22 21:23:19,857 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,872 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,873 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-05-22 21:23:19,873 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-05-22 21:23:19,888 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,888 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity1',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-05-22 21:23:19,903 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,903 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity2',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-05-22 21:23:19,903 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-05-22 21:23:19,920 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,920 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-05-22 21:23:19,923 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-22 21:23:19,925 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-22 21:23:19,927 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-22 21:23:19,951 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,967 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:19,967 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-05-22 21:23:19,967 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-05-22 21:23:19,967 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-05-22 21:23:19,969 INFO [context/create_or_update]: key ContextKey.EVENTHUB_CONSUMER_GROUP_SECRETS now available in TakeoffContext
2020-05-22 21:23:19,971 INFO [configure_eventhub/_create_consumer_group]: Creating consumer group EventHubConsumerGroup(eventhub=EventHub(resource_group='my-rg', namespace='my-namespace', name='my-entity'), consumer_group='my-group', create_databricks_secret=True)
2020-05-22 21:23:19,971 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-rg, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-22 21:23:20,014 ERROR [step/validate]: not a valid value for dictionary value @ data['application_type']
2020-05-22 21:23:20,015 ERROR [step/validate]: {'application_type': 'invalid',
 'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'kind': 'invalid',
 'task': 'create_application_insights'}
2020-05-22 21:23:20,043 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-05-22 21:23:20,059 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:20,077 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-05-22 21:23:20,093 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:20,360 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: foo
2020-05-22 21:23:20,360 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: bar
2020-05-22 21:23:20,464 INFO [deploy_to_kubernetes/_write_kube_config]: Kubeconfig successfully written
2020-05-22 21:23:20,632 ERROR [step/validate]: length of value must be at least 1 for dictionary value @ data['jobs']
2020-05-22 21:23:20,633 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'jobs': [],
 'task': 'deploy_to_databricks'}
2020-05-22 21:23:20,805 INFO [deploy_to_databricks/deploy_to_databricks]: Removing old job
2020-05-22 21:23:20,806 INFO [deploy_to_databricks/deploy_to_databricks]: Submitting new job with configuration:
2020-05-22 21:23:20,806 INFO [deploy_to_databricks/deploy_to_databricks]: {'libraries': [{'whl': 'dbfs:/mnt/libraries/version/version-bar-py3-none-any.whl'},
               {'jar': 'some.jar'}],
 'name': 'job_with_schedule',
 'new_cluster': {'cluster_log_conf': {'dbfs': {'destination': 'dbfs:/mnt/sdh/logs/job_with_schedule'}},
                 'spark_conf': {'some.setting': 'true',
                                'spark.sql.warehouse.dir': '/some_'},
                 'spark_version': '4.1.x-scala2.11'},
 'spark_python_task': {'parameters': ['--key', 'val', '--key2', 'val2'],
                       'python_file': 'dbfs:/mnt/libraries/version/version-main-bar.py'}}
2020-05-22 21:23:20,818 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-05-22 21:23:20,818 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-05-22 21:23:20,818 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-05-22 21:23:20,818 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-05-22 21:23:20,840 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-05-22 21:23:20,840 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-05-22 21:23:20,840 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-05-22 21:23:20,841 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-05-22 21:23:20,851 INFO [deploy_to_databricks/remove_job]: Could not find jobs in list of [JobConfig(name='job1', job_id='id1'), JobConfig(name='job2', job_id='id2')]
2020-05-22 21:23:20,862 INFO [deploy_to_databricks/_kill_it_with_fire]: Finding runs for job_id my-id
2020-05-22 21:23:20,862 INFO [deploy_to_databricks/_kill_it_with_fire]: Canceling active runs ['run1', 'run2']
2020-05-22 21:23:20,873 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-05-22 21:23:20,884 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-05-22 21:23:20,884 INFO [deploy_to_databricks/_submit_job]: Created run with ID run1
2020-05-22 21:23:20,971 INFO [publish_artifact/publish_to_pypi]: Not on a release tag, not publishing artifact on PyPi.
2020-05-22 21:23:20,980 INFO [publish_artifact/_upload_file_to_azure_storage_account]: uploading artifact from
             | from $Dave
             | to $Mustaine
             | in container mylittlepony
2020-05-22 21:23:20,996 ERROR [step/validate]: Cannot publish wheels to Ivy
2020-05-22 21:23:20,997 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'python',
 'target': ['ivy'],
 'task': 'publish_artifact'}
2020-05-22 21:23:21,004 ERROR [step/validate]: value is not allowed for dictionary value @ data['language']
2020-05-22 21:23:21,005 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'sbt',
 'target': ['pypi'],
 'task': 'publish_artifact'}
2020-05-22 21:23:21,022 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:21,040 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 21:23:21,057 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:21,074 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 21:23:21,091 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:21,108 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 21:23:21,125 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:21,142 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 21:23:21,159 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:21,177 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 21:23:21,193 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-22 21:23:21,211 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-22 21:23:21,234 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:10,369 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-25 10:25:10,371 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-25 10:25:10,371 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-25 10:25:10,372 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-25 10:25:10,374 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-25 10:25:10,376 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-25 10:25:10,376 INFO [context/create_or_update]: key James now available in TakeoffContext
2020-05-25 10:25:10,378 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-25 10:25:10,384 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-25 10:25:10,385 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-25 10:25:10,385 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-25 10:25:10,385 INFO [deploy/main]: ****************************************************************************
2020-05-25 10:25:10,385 INFO [deploy/main]: ********** RUNNING TASK: configure_eventhub                       **********
2020-05-25 10:25:10,385 INFO [deploy/main]: ****************************************************************************
2020-05-25 10:25:10,389 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-25 10:25:10,389 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-25 10:25:10,389 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-25 10:25:10,389 INFO [deploy/main]: ****************************************************************************
2020-05-25 10:25:10,389 INFO [deploy/main]: ********** RUNNING TASK: create_databricks_secrets_from_vault     **********
2020-05-25 10:25:10,389 INFO [deploy/main]: ****************************************************************************
2020-05-25 10:25:10,393 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-25 10:25:10,393 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-25 10:25:10,393 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-25 10:25:10,393 INFO [deploy/main]: ****************************************************************************
2020-05-25 10:25:10,393 INFO [deploy/main]: ********** RUNNING TASK: deploy_to_databricks                     **********
2020-05-25 10:25:10,393 INFO [deploy/main]: ****************************************************************************
2020-05-25 10:25:10,404 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-25 10:25:10,404 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-25 10:25:10,412 INFO [deploy/main]: Adding plugins from ['/home/julia/simsalabim/takeoff/tests'] and current working directory
2020-05-25 10:25:10,413 INFO [deploy/main]: Running Takeoff with application version: <MagicMock name='get_environment()' id='140344255149248'>
2020-05-25 10:25:10,442 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_custom': <module '_takeoff_custom' from '/home/julia/simsalabim/takeoff/tests/_takeoff_custom/__init__.py'>}
2020-05-25 10:25:10,442 INFO [deploy/find_env_function]: Using plugin 'deploy_env_logic' function
2020-05-25 10:25:10,451 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/deployment.yaml
2020-05-25 10:25:10,453 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yaml
2020-05-25 10:25:10,453 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yml
2020-05-25 10:25:10,638 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-05-25 10:25:10,660 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-05-25 10:25:10,681 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-05-25 10:25:10,704 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-05-25 10:25:10,725 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-05-25 10:25:10,746 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-05-25 10:25:10,767 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/name/myapp:SNAPSHOT -f ./Dockerfile .
2020-05-25 10:25:10,767 INFO [build_docker_image/push_image]: Uploading docker image pony/name/myapp:SNAPSHOT
2020-05-25 10:25:10,767 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:SNAPSHOT -f ./File2 .
2020-05-25 10:25:10,768 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:SNAPSHOT
2020-05-25 10:25:10,795 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/myapp:2.1.0 -f ./Dockerfile .
2020-05-25 10:25:10,795 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:2.1.0
2020-05-25 10:25:10,795 INFO [build_docker_image/tag_image]: Tagging pony/myapp:2.1.0 as pony/myapp:latest
2020-05-25 10:25:10,795 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:latest
2020-05-25 10:25:10,796 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:2.1.0 -f ./File2 .
2020-05-25 10:25:10,796 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:2.1.0
2020-05-25 10:25:10,820 ERROR [step/validate]: not a valid value for dictionary value @ data['task']
2020-05-25 10:25:10,822 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'eventhub_naming': 'eventhub{env}',
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'task': 'createEventHubConsumerGroups'}
2020-05-25 10:25:10,846 WARNING [configure_eventhub/_group_exists]: Consumer group with name group1 in hub some_hub already exists, not creating.
2020-05-25 10:25:10,874 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:10,874 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-05-25 10:25:10,899 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:10,922 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:10,922 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-05-25 10:25:10,922 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-05-25 10:25:10,941 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:10,941 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity1',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-05-25 10:25:10,960 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:10,960 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity2',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-05-25 10:25:10,960 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-05-25 10:25:10,986 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:10,987 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-05-25 10:25:10,990 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-25 10:25:10,991 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-25 10:25:10,993 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-25 10:25:11,018 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:11,038 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:11,038 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-05-25 10:25:11,039 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-05-25 10:25:11,039 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-05-25 10:25:11,042 INFO [context/create_or_update]: key ContextKey.EVENTHUB_CONSUMER_GROUP_SECRETS now available in TakeoffContext
2020-05-25 10:25:11,045 INFO [configure_eventhub/_create_consumer_group]: Creating consumer group EventHubConsumerGroup(eventhub=EventHub(resource_group='my-rg', namespace='my-namespace', name='my-entity'), consumer_group='my-group', create_databricks_secret=True)
2020-05-25 10:25:11,045 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-rg, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-25 10:25:11,088 ERROR [step/validate]: not a valid value for dictionary value @ data['application_type']
2020-05-25 10:25:11,090 ERROR [step/validate]: {'application_type': 'invalid',
 'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'kind': 'invalid',
 'task': 'create_application_insights'}
2020-05-25 10:25:11,116 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-05-25 10:25:11,136 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:11,159 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-05-25 10:25:11,179 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:11,503 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: foo
2020-05-25 10:25:11,503 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: bar
2020-05-25 10:25:11,655 INFO [deploy_to_kubernetes/_write_kube_config]: Kubeconfig successfully written
2020-05-25 10:25:11,881 ERROR [step/validate]: length of value must be at least 1 for dictionary value @ data['jobs']
2020-05-25 10:25:11,883 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'jobs': [],
 'task': 'deploy_to_databricks'}
2020-05-25 10:25:12,174 INFO [deploy_to_databricks/deploy_to_databricks]: Removing old job
2020-05-25 10:25:12,175 INFO [deploy_to_databricks/deploy_to_databricks]: Submitting new job with configuration:
2020-05-25 10:25:12,175 INFO [deploy_to_databricks/deploy_to_databricks]: {'libraries': [{'whl': 'dbfs:/mnt/libraries/version/version-bar-py3-none-any.whl'},
               {'jar': 'some.jar'}],
 'name': 'job_with_schedule',
 'new_cluster': {'cluster_log_conf': {'dbfs': {'destination': 'dbfs:/mnt/sdh/logs/job_with_schedule'}},
                 'spark_conf': {'some.setting': 'true',
                                'spark.sql.warehouse.dir': '/some_'},
                 'spark_version': '4.1.x-scala2.11'},
 'spark_python_task': {'parameters': ['--key', 'val', '--key2', 'val2'],
                       'python_file': 'dbfs:/mnt/libraries/version/version-main-bar.py'}}
2020-05-25 10:25:12,198 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-05-25 10:25:12,198 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-05-25 10:25:12,198 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-05-25 10:25:12,198 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-05-25 10:25:12,240 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-05-25 10:25:12,240 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-05-25 10:25:12,240 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-05-25 10:25:12,240 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-05-25 10:25:12,261 INFO [deploy_to_databricks/remove_job]: Could not find jobs in list of [JobConfig(name='job1', job_id='id1'), JobConfig(name='job2', job_id='id2')]
2020-05-25 10:25:12,277 INFO [deploy_to_databricks/_kill_it_with_fire]: Finding runs for job_id my-id
2020-05-25 10:25:12,277 INFO [deploy_to_databricks/_kill_it_with_fire]: Canceling active runs ['run1', 'run2']
2020-05-25 10:25:12,297 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-05-25 10:25:12,317 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-05-25 10:25:12,317 INFO [deploy_to_databricks/_submit_job]: Created run with ID run1
2020-05-25 10:25:12,466 INFO [publish_artifact/publish_to_pypi]: Not on a release tag, not publishing artifact on PyPi.
2020-05-25 10:25:12,479 INFO [publish_artifact/_upload_file_to_azure_storage_account]: uploading artifact from
             | from $Dave
             | to $Mustaine
             | in container mylittlepony
2020-05-25 10:25:12,505 ERROR [step/validate]: Cannot publish wheels to Ivy
2020-05-25 10:25:12,506 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'python',
 'target': ['ivy'],
 'task': 'publish_artifact'}
2020-05-25 10:25:12,517 ERROR [step/validate]: value is not allowed for dictionary value @ data['language']
2020-05-25 10:25:12,518 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'sbt',
 'target': ['pypi'],
 'task': 'publish_artifact'}
2020-05-25 10:25:12,549 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:12,581 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-25 10:25:12,602 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:12,624 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-25 10:25:12,647 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:12,669 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-25 10:25:12,689 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:12,710 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-25 10:25:12,732 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:12,757 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-25 10:25:12,779 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-25 10:25:12,801 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-25 10:25:12,843 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:17,642 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-26 16:26:17,645 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-26 16:26:17,645 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-26 16:26:17,647 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-26 16:26:17,649 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-26 16:26:17,651 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-26 16:26:17,651 INFO [context/create_or_update]: key James now available in TakeoffContext
2020-05-26 16:26:17,654 INFO [context/create_or_update]: key Alice now available in TakeoffContext
2020-05-26 16:26:17,661 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-26 16:26:17,662 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-26 16:26:17,662 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-26 16:26:17,662 INFO [deploy/main]: ****************************************************************************
2020-05-26 16:26:17,662 INFO [deploy/main]: ********** RUNNING TASK: configure_eventhub                       **********
2020-05-26 16:26:17,662 INFO [deploy/main]: ****************************************************************************
2020-05-26 16:26:17,668 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-26 16:26:17,668 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-26 16:26:17,669 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-26 16:26:17,669 INFO [deploy/main]: ****************************************************************************
2020-05-26 16:26:17,669 INFO [deploy/main]: ********** RUNNING TASK: create_databricks_secrets_from_vault     **********
2020-05-26 16:26:17,669 INFO [deploy/main]: ****************************************************************************
2020-05-26 16:26:17,675 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-26 16:26:17,675 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-26 16:26:17,675 INFO [deploy/main]: Running Takeoff with application version: ApplicationVersion(environment='DEV', version='abc123githash', branch='some-branch')
2020-05-26 16:26:17,676 INFO [deploy/main]: ****************************************************************************
2020-05-26 16:26:17,676 INFO [deploy/main]: ********** RUNNING TASK: deploy_to_databricks                     **********
2020-05-26 16:26:17,676 INFO [deploy/main]: ****************************************************************************
2020-05-26 16:26:17,690 INFO [deploy/main]: 
  ______      __              ________
 /_  __/___ _/ /_____  ____  / __/ __/
  / / / __ `/ //_/ _ \/ __ \/ /_/ /_
 / / / /_/ / ,< /  __/ /_/ / __/ __/
/_/  \__,_/_/|_|\___/\____/_/ /_/

    
2020-05-26 16:26:17,691 INFO [deploy/main]: Loading Takeoff configuration from .takeoff
2020-05-26 16:26:17,704 INFO [deploy/main]: Adding plugins from ['/home/julia/simsalabim/takeoff/tests'] and current working directory
2020-05-26 16:26:17,705 INFO [deploy/main]: Running Takeoff with application version: <MagicMock name='get_environment()' id='140353013726608'>
2020-05-26 16:26:17,752 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_custom': <module '_takeoff_custom' from '/home/julia/simsalabim/takeoff/tests/_takeoff_custom/__init__.py'>}
2020-05-26 16:26:17,753 INFO [deploy/find_env_function]: Using plugin 'deploy_env_logic' function
2020-05-26 16:26:17,768 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/deployment.yaml
2020-05-26 16:26:17,772 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yaml
2020-05-26 16:26:17,772 INFO [util/get_full_yaml_filename]: Could not find file: .takeoff/my_stupid_file.yml
2020-05-26 16:26:18,070 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-05-26 16:26:18,112 INFO [build_docker_image/tag_image]: Tagging old_tag as new_tag
2020-05-26 16:26:18,152 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-05-26 16:26:18,195 INFO [build_docker_image/build_image]: Building docker image for Thefile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t stag -f ./Thefile .
2020-05-26 16:26:18,232 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-05-26 16:26:18,268 INFO [build_docker_image/push_image]: Uploading docker image image/stag
2020-05-26 16:26:18,319 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/name/myapp:SNAPSHOT -f ./Dockerfile .
2020-05-26 16:26:18,320 INFO [build_docker_image/push_image]: Uploading docker image pony/name/myapp:SNAPSHOT
2020-05-26 16:26:18,320 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:SNAPSHOT -f ./File2 .
2020-05-26 16:26:18,320 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:SNAPSHOT
2020-05-26 16:26:18,366 INFO [build_docker_image/build_image]: Building docker image for Dockerfile with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t pony/myapp:2.1.0 -f ./Dockerfile .
2020-05-26 16:26:18,367 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:2.1.0
2020-05-26 16:26:18,367 INFO [build_docker_image/tag_image]: Tagging pony/myapp:2.1.0 as pony/myapp:latest
2020-05-26 16:26:18,367 INFO [build_docker_image/push_image]: Uploading docker image pony/myapp:latest
2020-05-26 16:26:18,368 INFO [build_docker_image/build_image]: Building docker image for File2 with command 
docker build --build-arg PIP_EXTRA_INDEX_URL=url/to/artifact/store -t mycustom/repo-foo:2.1.0 -f ./File2 .
2020-05-26 16:26:18,368 INFO [build_docker_image/push_image]: Uploading docker image mycustom/repo-foo:2.1.0
2020-05-26 16:26:18,420 ERROR [step/validate]: not a valid value for dictionary value @ data['task']
2020-05-26 16:26:18,422 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'eventhub_naming': 'eventhub{env}',
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'task': 'createEventHubConsumerGroups'}
2020-05-26 16:26:18,457 WARNING [configure_eventhub/_group_exists]: Consumer group with name group1 in hub some_hub already exists, not creating.
2020-05-26 16:26:18,519 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:18,519 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-05-26 16:26:18,562 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:18,611 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:18,611 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-05-26 16:26:18,612 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-05-26 16:26:18,654 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:18,654 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity1',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-05-26 16:26:18,699 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:18,699 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my_little_pony-send-policy',
 'event_hub_name': 'entity2',
 'namespace_name': 'eventhubdev',
 'resource_group_name': 'rgdev'}
2020-05-26 16:26:18,700 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-05-26 16:26:18,742 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:18,742 INFO [configure_eventhub/_create_producer_policy]: Creating producer policy with values {'authorization_rule_name': 'my-name-send-policy',
 'event_hub_name': 'my-entity',
 'namespace_name': 'my-namespace',
 'resource_group_name': 'my-group'}
2020-05-26 16:26:18,747 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-26 16:26:18,750 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-26 16:26:18,753 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-group, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-26 16:26:18,801 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:18,846 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:18,846 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure resource group: rgdev
2020-05-26 16:26:18,846 INFO [configure_eventhub/create_eventhub_producer_policies]: Using Azure EventHub namespace: eventhubdev
2020-05-26 16:26:18,847 INFO [context/create_or_update]: key ContextKey.EVENTHUB_PRODUCER_POLICY_SECRETS now available in TakeoffContext
2020-05-26 16:26:18,853 INFO [context/create_or_update]: key ContextKey.EVENTHUB_CONSUMER_GROUP_SECRETS now available in TakeoffContext
2020-05-26 16:26:18,861 INFO [configure_eventhub/_create_consumer_group]: Creating consumer group EventHubConsumerGroup(eventhub=EventHub(resource_group='my-rg', namespace='my-namespace', name='my-entity'), consumer_group='my-group', create_databricks_secret=True)
2020-05-26 16:26:18,862 INFO [configure_eventhub/_authorization_rules_exists]: Retrieving rules, Resource Group my-rg, EventHub Namespace my-namespace, EventHub Entity: my-entity
2020-05-26 16:26:18,956 ERROR [step/validate]: not a valid value for dictionary value @ data['application_type']
2020-05-26 16:26:18,959 ERROR [step/validate]: {'application_type': 'invalid',
 'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'kind': 'invalid',
 'task': 'create_application_insights'}
2020-05-26 16:26:19,020 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-05-26 16:26:19,078 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:19,133 INFO [create_application_insights/create_application_insights]: Creating new Application Insights...
2020-05-26 16:26:19,184 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:19,845 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: foo
2020-05-26 16:26:19,846 INFO [create_databricks_secrets/_add_secrets]: Set secret my-scope: bar
2020-05-26 16:26:20,113 INFO [deploy_to_kubernetes/_write_kube_config]: Kubeconfig successfully written
2020-05-26 16:26:20,412 ERROR [step/validate]: length of value must be at least 1 for dictionary value @ data['jobs']
2020-05-26 16:26:20,413 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'jobs': [],
 'task': 'deploy_to_databricks'}
2020-05-26 16:26:20,794 INFO [deploy_to_databricks/deploy_to_databricks]: Removing old job
2020-05-26 16:26:20,795 INFO [deploy_to_databricks/deploy_to_databricks]: Submitting new job with configuration:
2020-05-26 16:26:20,795 INFO [deploy_to_databricks/deploy_to_databricks]: {'libraries': [{'whl': 'dbfs:/mnt/libraries/version/version-bar-py3-none-any.whl'},
               {'jar': 'some.jar'}],
 'name': 'job_with_schedule',
 'new_cluster': {'cluster_log_conf': {'dbfs': {'destination': 'dbfs:/mnt/sdh/logs/job_with_schedule'}},
                 'spark_conf': {'some.setting': 'true',
                                'spark.sql.warehouse.dir': '/some_'},
                 'spark_version': '4.1.x-scala2.11'},
 'spark_python_task': {'parameters': ['--key', 'val', '--key2', 'val2'],
                       'python_file': 'dbfs:/mnt/libraries/version/version-main-bar.py'}}
2020-05-26 16:26:20,819 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-05-26 16:26:20,820 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-05-26 16:26:20,820 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-05-26 16:26:20,820 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-05-26 16:26:20,868 INFO [deploy_to_databricks/remove_job]: Found Job with ID id1
2020-05-26 16:26:20,868 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id1
2020-05-26 16:26:20,868 INFO [deploy_to_databricks/remove_job]: Found Job with ID id2
2020-05-26 16:26:20,868 INFO [deploy_to_databricks/remove_job]: Deleting Job with ID id2
2020-05-26 16:26:20,894 INFO [deploy_to_databricks/remove_job]: Could not find jobs in list of [JobConfig(name='job1', job_id='id1'), JobConfig(name='job2', job_id='id2')]
2020-05-26 16:26:20,921 INFO [deploy_to_databricks/_kill_it_with_fire]: Finding runs for job_id my-id
2020-05-26 16:26:20,921 INFO [deploy_to_databricks/_kill_it_with_fire]: Canceling active runs ['run1', 'run2']
2020-05-26 16:26:20,943 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-05-26 16:26:20,966 INFO [deploy_to_databricks/_submit_job]: Created Job with ID job1
2020-05-26 16:26:20,967 INFO [deploy_to_databricks/_submit_job]: Created run with ID run1
2020-05-26 16:26:21,173 INFO [publish_artifact/publish_to_pypi]: Not on a release tag, not publishing artifact on PyPi.
2020-05-26 16:26:21,193 INFO [publish_artifact/_upload_file_to_azure_storage_account]: uploading artifact from
             | from $Dave
             | to $Mustaine
             | in container mylittlepony
2020-05-26 16:26:21,227 ERROR [step/validate]: Cannot publish wheels to Ivy
2020-05-26 16:26:21,229 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'python',
 'target': ['ivy'],
 'task': 'publish_artifact'}
2020-05-26 16:26:21,241 ERROR [step/validate]: value is not allowed for dictionary value @ data['language']
2020-05-26 16:26:21,243 ERROR [step/validate]: {'azure': {'common': {'artifacts_shared_blob_container_name': 'libraries',
                      'shared_registry': 'some-registry'},
           'keyvault_keys': {'active_directory_user': {'password': 'azure-password',
                                                       'username': 'azure-username'},
                             'artifact_store': {'password': 'artifactory-password',
                                                'repository_url': 'artifactory-upload-url',
                                                'username': 'artifactory-username'},
                             'container_registry': {'password': 'registry-password',
                                                    'registry': 'shared-registry',
                                                    'username': 'registry-username'},
                             'databricks': {'host': 'azure-databricks-host',
                                            'token': 'azure-databricks-token'},
                             'storage_account': {'account_key': 'azure-shared-blob-password',
                                                 'account_name': 'azure-shared-blob-username'}},
           'keyvault_naming': 'https://keyvault{env}.vault.azure.net/',
           'location': 'west europe',
           'resource_group_naming': 'rg{env}'},
 'ci_environment_keys_acp': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_ACP',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_ACP',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_dev': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_DEV',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_DEV',
                                                   'tenant': 'AZURE_TENANTID'}},
 'ci_environment_keys_prd': {'service_principal': {'client_id': 'AZURE_KEYVAULT_SP_USERNAME_PRD',
                                                   'secret': 'AZURE_KEYVAULT_SP_PASSWORD_PRD',
                                                   'tenant': 'AZURE_TENANTID'}},
 'common': {'databricks_fs_libraries_mount_path': 'dbfs:/mnt/libraries'},
 'environment_keys': {'application_name': 'CI_PROJECT_NAME',
                      'branch_name': 'CI_COMMIT_REF_SLUG'},
 'language': 'sbt',
 'target': ['pypi'],
 'task': 'publish_artifact'}
2020-05-26 16:26:21,275 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:21,317 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-26 16:26:21,352 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:21,383 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-26 16:26:21,425 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:21,457 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-26 16:26:21,491 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:21,523 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-26 16:26:21,553 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:21,589 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-26 16:26:21,622 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
2020-05-26 16:26:21,663 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'_takeoff_azure_custom': <module '_takeoff_azure_custom' from '/home/julia/simsalabim/takeoff/tests/azure/_takeoff_azure_custom/__init__.py'>}
2020-05-26 16:26:21,714 INFO [util/load_takeoff_plugins]: Found Takeoff plugins {'takeoff_plugins': <module 'takeoff_plugins' from '/home/julia/simsalabim/takeoff/takeoff_plugins/__init__.py'>}
